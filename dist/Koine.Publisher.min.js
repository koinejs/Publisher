var exports=exports||null;!function(a){"use strinct";a.Publisher=function(){this.clearSubscriptions()},a.Publisher.prototype={subscribe:function(a,b){return this._subscriptions[a]=this._subscriptions[a]||[],this._subscriptions[a].push(b),this},publish:function(b){if(!(b instanceof a.Publisher.EventType))throw new Error("Event must be instance of Koine.Publisher.EventType");var c=this._subscriptions[b.type]||[];return c.forEach(function(a){a.call(b.target,b)}),this},clearSubscriptions:function(){this._subscriptions={}},unsubscribe:function(a,b){if(b)for(var c=this._subscriptions[a]||[],d=1;d>=1;)d=c.indexOf(b),d>=0&&c.splice(d,1);else a&&(this._subscriptions[a]=[]);return this}},a.Publisher.wrap=function(b){b.prototype.getPublisher=function(){return this._publisher=this._publisher||new a.Publisher,this._publisher},b.prototype.on=function(a,b){if(a.indexOf(",")>0){var c=this;a.split(",").forEach(function(a){c.on(a.trim(),b)})}else this.getPublisher().subscribe(a,b);return this},b.prototype.off=function(a,b){return this.getPublisher().unsubscribe(a,b),this},b.prototype.trigger=function(b){return"string"==typeof b&&(b=new a.Publisher.EventType(b)),b.target=b.target||this,this.getPublisher().publish(b),this}},a.Publisher.EventType=function(a,b){if("string"!=typeof a)throw new Error("Type must be provided");this.target=b,this.type=a}}(exports?exports:this.Koine||(this.Koine={}));